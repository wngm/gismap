define(["exports","./Matrix2-c430e55a","./ComponentDatatype-9e86ac8f","./RuntimeError-8952249c","./defaultValue-81eec7ed"],(function(e,t,n,r,o){"use strict";const a={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",getMathType:function(e){switch(e){case a.SCALAR:return Number;case a.VEC2:return t.Cartesian2;case a.VEC3:return t.Cartesian3;case a.VEC4:return t.Cartesian4;case a.MAT2:return t.Matrix2;case a.MAT3:return t.Matrix3;case a.MAT4:return t.Matrix4;default:throw new r.DeveloperError("attributeType is not a valid value.")}},getNumberOfComponents:function(e){switch(e){case a.SCALAR:return 1;case a.VEC2:return 2;case a.VEC3:return 3;case a.VEC4:case a.MAT2:return 4;case a.MAT3:return 9;case a.MAT4:return 16;default:throw new r.DeveloperError("attributeType is not a valid value.")}},getAttributeLocationCount:function(e){switch(e){case a.SCALAR:case a.VEC2:case a.VEC3:case a.VEC4:return 1;case a.MAT2:return 2;case a.MAT3:return 3;case a.MAT4:return 4;default:throw new r.DeveloperError("attributeType is not a valid value.")}},getGlslType:function(e){switch(r.Check.typeOf.string("attributeType",e),e){case a.SCALAR:return"float";case a.VEC2:return"vec2";case a.VEC3:return"vec3";case a.VEC4:return"vec4";case a.MAT2:return"mat2";case a.MAT3:return"mat3";case a.MAT4:return"mat4";default:throw new r.DeveloperError("attributeType is not a valid value.")}}};var c=Object.freeze(a);const s=1/256,u={octEncodeInRange:function(e,o,a){r.Check.defined("vector",e),r.Check.defined("result",a);const c=t.Cartesian3.magnitudeSquared(e);if(Math.abs(c-1)>n.CesiumMath.EPSILON6)throw new r.DeveloperError("vector must be normalized.");if(a.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),a.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0){const e=a.x,t=a.y;a.x=(1-Math.abs(t))*n.CesiumMath.signNotZero(e),a.y=(1-Math.abs(e))*n.CesiumMath.signNotZero(t)}return a.x=n.CesiumMath.toSNorm(a.x,o),a.y=n.CesiumMath.toSNorm(a.y,o),a},octEncode:function(e,t){return u.octEncodeInRange(e,255,t)}},i=new t.Cartesian2,d=new Uint8Array(1);function f(e){return d[0]=e,d[0]}u.octEncodeToCartesian4=function(e,t){return u.octEncodeInRange(e,65535,i),t.x=f(i.x*s),t.y=f(i.x),t.z=f(i.y*s),t.w=f(i.y),t},u.octDecodeInRange=function(e,o,a,c){if(r.Check.defined("result",c),e<0||e>a||o<0||o>a)throw new r.DeveloperError(`x and y must be unsigned normalized integers between 0 and ${a}`);if(c.x=n.CesiumMath.fromSNorm(e,a),c.y=n.CesiumMath.fromSNorm(o,a),c.z=1-(Math.abs(c.x)+Math.abs(c.y)),c.z<0){const e=c.x;c.x=(1-Math.abs(c.y))*n.CesiumMath.signNotZero(e),c.y=(1-Math.abs(e))*n.CesiumMath.signNotZero(c.y)}return t.Cartesian3.normalize(c,c)},u.octDecode=function(e,t,n){return u.octDecodeInRange(e,t,255,n)},u.octDecodeFromCartesian4=function(e,t){r.Check.typeOf.object("encoded",e),r.Check.typeOf.object("result",t);const n=e.x,o=e.y,a=e.z,c=e.w;if(n<0||n>255||o<0||o>255||a<0||a>255||c<0||c>255)throw new r.DeveloperError("x, y, z, and w must be unsigned normalized integers between 0 and 255");const s=256*n+o,i=256*a+c;return u.octDecodeInRange(s,i,65535,t)},u.octPackFloat=function(e){return r.Check.defined("encoded",e),256*e.x+e.y};const h=new t.Cartesian2;function C(e){return e>>1^-(1&e)}u.octEncodeFloat=function(e){return u.octEncode(e,h),u.octPackFloat(h)},u.octDecodeFloat=function(e,t){r.Check.defined("value",e);const n=e/256,o=Math.floor(n),a=256*(n-o);return u.octDecode(o,a,t)},u.octPack=function(e,t,n,o){r.Check.defined("v1",e),r.Check.defined("v2",t),r.Check.defined("v3",n),r.Check.defined("result",o);const a=u.octEncodeFloat(e),c=u.octEncodeFloat(t),s=u.octEncode(n,h);return o.x=65536*s.x+a,o.y=65536*s.y+c,o},u.octUnpack=function(e,t,n,o){r.Check.defined("packed",e),r.Check.defined("v1",t),r.Check.defined("v2",n),r.Check.defined("v3",o);let a=e.x/65536;const c=Math.floor(a),s=65536*(a-c);a=e.y/65536;const i=Math.floor(a),d=65536*(a-i);u.octDecodeFloat(s,t),u.octDecodeFloat(d,n),u.octDecode(c,i,o)},u.compressTextureCoordinates=function(e){return r.Check.defined("textureCoordinates",e),4096*(4095*e.x|0)+(4095*e.y|0)},u.decompressTextureCoordinates=function(e,t){r.Check.defined("compressed",e),r.Check.defined("result",t);const n=e/4096,o=Math.floor(n);return t.x=o/4095,t.y=(e-4096*o)/4095,t},u.zigZagDeltaDecode=function(e,t,n){r.Check.defined("uBuffer",e),r.Check.defined("vBuffer",t),r.Check.typeOf.number.equals("uBuffer.length","vBuffer.length",e.length,t.length),o.defined(n)&&r.Check.typeOf.number.equals("uBuffer.length","heightBuffer.length",e.length,n.length);const a=e.length;let c=0,s=0,u=0;for(let r=0;r<a;++r)c+=C(e[r]),s+=C(t[r]),e[r]=c,t[r]=s,o.defined(n)&&(u+=C(n[r]),n[r]=u)},u.dequantize=function(e,t,o,a){r.Check.defined("typedArray",e),r.Check.defined("componentDatatype",t),r.Check.defined("type",o),r.Check.defined("count",a);const s=c.getNumberOfComponents(o);let u;switch(t){case n.ComponentDatatype.BYTE:u=127;break;case n.ComponentDatatype.UNSIGNED_BYTE:u=255;break;case n.ComponentDatatype.SHORT:u=32767;break;case n.ComponentDatatype.UNSIGNED_SHORT:u=65535;break;case n.ComponentDatatype.INT:u=2147483647;break;case n.ComponentDatatype.UNSIGNED_INT:u=4294967295;break;default:throw new r.DeveloperError(`Cannot dequantize component datatype: ${t}`)}const i=new Float32Array(a*s);for(let t=0;t<a;t++)for(let n=0;n<s;n++){const r=t*s+n;i[r]=Math.max(e[r]/u,-1)}return i},u.decodeRGB565=function(e,t){r.Check.defined("typedArray",e);const n=3*e.length;o.defined(t)&&r.Check.typeOf.number.equals("result.length","typedArray.length * 3",t.length,n);const a=e.length;o.defined(t)||(t=new Float32Array(3*a));const c=1/31;for(let n=0;n<a;n++){const r=e[n],o=r>>11,a=r>>5&63,s=31&r,u=3*n;t[u]=o*c,t[u+1]=.015873015873015872*a,t[u+2]=s*c}return t},e.AttributeCompression=u}));